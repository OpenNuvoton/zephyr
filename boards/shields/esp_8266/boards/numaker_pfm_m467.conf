# SPDX-License-Identifier: Apache-2.0

# Without enable, ESP8266 shield will continuously push data to board (+IPD) anyway
# on receive and board's Rx buffer can get OOM easily. However, current driver
# implementation on Passive Receive mode has the following concerns:
# 1. On <conn_id>,CLOSED, driver closes the socket prematurely and buffered Rx data on
#    ESP8266 shield gets unable to fetch (AT+RECVDATA).
#    NOTE: To re-produce the issue, go samples/net/sockets/http_get in which the server
#          end will close the connection immediately after replying the http response.
# 2. On +IPD, driver doesn't consider available Rx buffer and straight schedules to fetch
#    buffered Rx data on ESP8266 shield, still causing Rx buffer OOM. One approach may
#    pre-allocate Rx buffer before the schedule.
#    NOTE: To re-produce the issue, go samples/net/sockets/big_http_download/src, adding
#          delay e.g. k_msleep(8000) in the download() while loop.
#    NOTE: With or without this feature enabled, esp_socket_prepare_pkt() enabling timed
#          wait (CONFIG_WIFI_ESP_AT_RX_NET_PKT_ALLOC_TIMEOUT) can relieve the problem to
#          some degree.
#
# See: https://github.com/zephyrproject-rtos/zephyr/issues/52702
#CONFIG_WIFI_ESP_AT_PASSIVE_MODE=y
